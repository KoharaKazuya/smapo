extends ../layout

block script
  script
    :coffee
      jQuery.get '/widget/hatenablog', (entries) ->
        $ul = $('#blog ul')
        for entry in entries
          $li = $('<li>')
          $li.append $('<a>').append($('<img>').addClass('user-icon').attr('src', if entry.user_icon? and entry.user_icon != '' then entry.user_icon else '/images/icon/404_smashball.png')).attr('href', '/profile/' + entry.user_id)
          date = new Date(entry.time)
          $li.append $('<a>').attr('href', entry.link).append(
            $('<h5>').text(' ' + entry.title).prepend($('<small>').text("#{date.getMonth() + 1}/#{date.getDate()}"))
            $('<p>').text(entry.summary)
          )
          $ul.prepend $li

block content
  h2.page-header 全日記一覧
  .row
    .col-md-12
      #blog.panel.panel-default
        .panel-heading
          h3.panel-title 日記
        ul.news
          li
